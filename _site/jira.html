<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>JIRA Collector | Hygieia</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>
<script src="js/csi.min.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Hygieia Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="https://github.com/capitalone/Hygieia" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="p1_landing_page.html">Supported Collectors List</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:hygieia@capitalone.com?subject=Hygieia Documentation feedback&body=I have some feedback about the JIRA Collector page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="JIRA Collector">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          














<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">
    <!-- <span><img src="./images/devops_logo.png"/></span> -->
     </li>
    
    
    
        
    
    <li>
        <a href="#">Home/Getting Started</a>
        <ul>
            
            
            
            <li><a href="getting_started.html">Introduction</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Installation/Setup Instructions</a>
        <ul>
            
            
            
            <li><a href="setup.html">Setup Instructions</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Configuration Procedure</a>
        <ul>
            
            
            
            <li><a href="database.html">Database Configuration</a></li>
            
            
            
            
            
            
            <li><a href="api.html">API Configuration</a></li>
            
            
            
            
            
            
            <li><a href="ui.html">UI Configuration</a></li>
            
            
            
            
            
            
            <li><a href="collectors.html">Collectors</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Additional Configuration</a>
        <ul>
            
            
            
            <li><a href="pluginjenkins.html">Plugins/Webhook</a></li>
            
            
            
            
            
            
            <li><a href="proxyauthentication.html">Proxy Authentication</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Build</a>
        <ul>
            
            
            
            <li><a href="builddocker.html">Build Docker</a></li>
            
            
            
            
            
            
            <li><a href="buildhygieia.html">Build Hygieia</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Test the Installation</a>
        <ul>
            
            
            
            <li><a href="gitsetup.html">Set up Git</a></li>
            
            
            
            
            
            
            <li><a href="sonarsetup.html">Set up Sonar</a></li>
            
            
            
            
            
            
            <li><a href="jenkinssetup.html">Set up Jenkins</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        
<div class="post-header">
   <h1 class="post-title-main">JIRA Collector</h1>
</div>




<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


    

  <h1 id="hygieia-feature-collectors--jira">Hygieia Feature Collectors / Jira</h1>

<p>Retrieves feature content data from the source system APIs and places it in a MongoDB for later retrieval and use by the DevOps Dashboard</p>

<p>This project uses Spring Boot to package the collector as an executable JAR with dependencies.</p>

<h2 id="building-and-deploying">Building and Deploying</h2>

<p>To package the collector into an executable JAR file, run:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>mvn install
</code></pre>
</div>

<p>Copy this file to your server and launch it using:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>java -jar jira-feature-collector.jar
</code></pre>
</div>

<h2 id="applicationproperties">application.properties</h2>

<p>You will need to provide an <strong>application.properties</strong> file that contains information about how to connect to the Dashboard MongoDB database instance, as well as properties the Jira feature collector requires. See the Spring Boot <a href="http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-external-config-application-property-files">documentation</a> for information about sourcing this properties file.</p>

<h3 id="sample-applicationproperties-file-with-minimum-overrides">Sample application.properties file, with minimum overrides</h3>

<div class="language-properties highlighter-rouge"><pre class="highlight"><code><span class="c"># Database Name
</span><span class="py">dbname</span><span class="p">=</span><span class="s">dashboard</span>

<span class="c"># Database HostName - default is localhost
</span><span class="py">dbhost</span><span class="p">=</span><span class="s">localhost</span>

<span class="c"># Database Port - default is 27017
</span><span class="py">dbport</span><span class="p">=</span><span class="s">27017</span>

<span class="c"># MongoDB replicaset
</span><span class="py">dbreplicaset</span><span class="p">=</span><span class="s">[false if you are not using MongoDB replicaset]</span>
<span class="py">dbhostport</span><span class="p">=</span><span class="s">[host1:port1,host2:port2,host3:port3]</span>

<span class="c"># Database Username - default is blank
</span><span class="py">dbusername</span><span class="p">=</span><span class="s">db</span>

<span class="c"># Database Password - default is blank
</span><span class="py">dbpassword</span><span class="p">=</span><span class="s">dbpass</span>

<span class="c"># Logging File location
</span><span class="py">logging.file</span><span class="p">=</span><span class="s">./logs/jira.log</span>

<span class="c"># PageSize - Expand contract this value depending on Jira implementation's
# default server timeout setting (You will likely receive a SocketTimeoutException)
</span><span class="py">feature.pageSize</span><span class="p">=</span><span class="s">100</span>

<span class="c"># Delta change date that modulates the collector item task
# Occasionally, these values should be modified if database size is a concern
</span><span class="py">feature.deltaStartDate</span><span class="p">=</span><span class="s">2016-03-01T00:00:00.000000</span>
<span class="py">feature.masterStartDate</span><span class="p">=</span><span class="s">2016-03-01T00:00:00.000000</span>
<span class="py">feature.deltaCollectorItemStartDate</span><span class="p">=</span><span class="s">2016-03-01T00:00:00.000000</span>

<span class="c"># Chron schedule: S M D M Y [Day of the Week]
</span><span class="py">feature.cron</span><span class="p">=</span><span class="s">0 * * * * *</span>

<span class="c"># ST Query File Details - Required, but DO NOT MODIFY
</span><span class="py">feature.queryFolder</span><span class="p">=</span><span class="s">jiraapi-queries</span>
<span class="py">feature.storyQuery</span><span class="p">=</span><span class="s">story</span>
<span class="py">feature.epicQuery</span><span class="p">=</span><span class="s">epic</span>

<span class="c"># JIRA CONNECTION DETAILS:
# Enterprise Proxy - ONLY INCLUDE IF YOU HAVE A PROXY
</span><span class="py">feature.jiraProxyUrl</span><span class="p">=</span><span class="s">http://proxy.com</span>
<span class="py">feature.jiraProxyPort</span><span class="p">=</span><span class="s">9000</span>
<span class="py">feature.jiraBaseUrl</span><span class="p">=</span><span class="s">https://jira.com/</span>
<span class="py">feature.jiraQueryEndpoint</span><span class="p">=</span><span class="s">rest/api/2/</span>
<span class="c"># For basic authentication, requires username:password as string in base64
# This command will make this for you:  echo -n username:password | base64
</span><span class="py">feature.jiraCredentials</span><span class="p">=</span><span class="s">dXNlcm5hbWU6cGFzc3dvcmQ=</span>
<span class="c"># OAuth is not fully implemented; please blank-out the OAuth values:
</span><span class="py">feature.jiraOauthAuthtoken</span><span class="p">=</span>
<span class="py">feature.jiraOauthRefreshtoken</span><span class="p">=</span>
<span class="py">feature.jiraOauthRedirecturi</span><span class="p">=</span>
<span class="py">feature.jiraOauthExpiretime</span><span class="p">=</span>

<span class="c">#############################################################################
# In Jira, general IssueType IDs are associated to various "issue"
# attributes. However, there is one attribute which this collector's
# queries rely on that change between different instantiations of Jira.
# Please provide a string name reference to your instance's IssueType for
# the lowest level of Issues (e.g., "user story") specific to your Jira
# instance.  Note:  You can retrieve your instance's IssueType Name
# listings via the following URI:  https://[your-jira-domain-name]/rest/api/2/issuetype/
# Multiple comma-separated values can be specified.
#############################################################################
</span><span class="py">feature.jiraIssueTypeNames</span><span class="p">=</span><span class="s">Story</span>

<span class="c">#############################################################################
# In Jira, your instance will have its own custom field created for "sprint" or "timebox" details,
# which includes a list of information.  This field allows you to specify that data field for your
# instance of Jira. Note: You can retrieve your instance's sprint data field name
# via the following URI, and look for a package name com.atlassian.greenhopper.service.sprint.Sprint;
# your custom field name describes the values in this field:
# https://[your-jira-domain-name]/rest/api/2/issue/[some-issue-name]
#############################################################################
</span><span class="py">feature.jiraSprintDataFieldName</span><span class="p">=</span><span class="s">customfield_10000</span>

<span class="c">#############################################################################
# In Jira, your instance will have its own custom field created for "super story" or "epic" back-end ID,
# which includes a list of information.  This field allows you to specify that data field for your instance
# of Jira.  Note:  You can retrieve your instance's epic ID field name via the following URI where your
# queried user story issue has a super issue (e.g., epic) tied to it; your custom field name describes the
# epic value you expect to see, and is the only field that does this for a given issue:
# https://[your-jira-domain-name]/rest/api/2/issue/[some-issue-name]
#############################################################################
</span><span class="py">feature.jiraEpicIdFieldName</span><span class="p">=</span><span class="s">customfield_10002</span>

<span class="c">#############################################################################
# In Jira, your instance will have its own custom field created for "story points"
# This field allows you to specify that data field for your instance
# of Jira.  Note:  You can retrieve your instance's storypoints ID field name via the following URI where your
# queried user story issue has story points set on it; your custom field name describes the
# story points value you expect to see:
# https://[your-jira-domain-name]/rest/api/2/issue/[some-issue-name]
#############################################################################
</span><span class="py">feature.jiraStoryPointsFieldName</span><span class="p">=</span><span class="s">customfield_10003</span>

<span class="c">#############################################################################
# In Jira, your instance will have its own custom field created for "team"
# This field allows you to specify that data field for your instance
# of Jira.  Note:  You can retrieve your instance's team ID field name via the following URI where your
# queried user story issue has team set on it; your custom field name describes the
# team value you expect to see:
# https://[your-jira-domain-name]/rest/api/2/issue/[some-issue-name]
#############################################################################
</span><span class="py">feature.jiraTeamFieldName</span><span class="p">=</span>
</code></pre>
</div>

<h4 id="troubleshooting">Troubleshooting</h4>
<h5 id="the-jira-collector-log-does-not-pull-data-in-for-xxxx">The jira collector log does not pull data in for XXXX</h5>
<p>Verify the jira collector configuration for the custom fields is setup correctly. Hit the rest API outlined in the sample application properties above to see what data is being pulled in. A healthy log will look something like this:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>2016-09-01 07:27:00,006 INFO c.c.d.collector.CollectorTask - Running Collector: Jira
2016-09-01 07:27:00,010 INFO c.c.d.collector.CollectorTask - -----------------------------------
2016-09-01 07:27:00,011 INFO c.c.d.collector.CollectorTask - https://my.jira.com/
2016-09-01 07:27:00,011 INFO c.c.d.collector.CollectorTask - -----------------------------------
2016-09-01 07:27:02,571 INFO c.c.d.collector.CollectorTask - Team Data 15 2s
2016-09-01 07:27:03,050 INFO c.c.d.collector.CollectorTask - Project Data 15 1s
2016-09-01 07:27:03,752 INFO c.c.d.collector.CollectorTask - Story Data 36 1s
2016-09-01 07:27:03,752 INFO c.c.d.collector.CollectorTask - Finished 4s
</code></pre>
</div>

<h5 id="my-jira-widget-dropdown-does-not-show-any-teams">My jira widget dropdown does not show any teams</h5>
<p>Verify your jira collector configuration. Verify that the jira collector is pulling in data by observing the logs. Connect to the mongo database using a tool such as RoboMongo and check that the ‘feature’ collection has data. Verify your API container is configured to hit the correct database.</p>

<h5 id="my-jira-widget-shows-all-0s-for-estimates">My jira widget shows all 0’s for estimates</h5>
<p>Verify your jira collector configuration. Verify that the jira collector is pulling in data by observing the logs. Connect to the mongo database using a tool such as RoboMongo and check that the ‘feature’ collection has data. Check that features associated to an active sprint have the sEstimate (sEstimateTime for hours) field populated.</p>

<h5 id="my-jira-widget-only-shows-kanban-sprints">My jira widget only shows kanban sprints</h5>
<p>In order to show scrum sprints there must exist stories with sprints attached to them that are active and have a recent start date. You can verify that this information is being pulled by either hitting the rest API or looking into the mongo database in the feature collection.</p>

<h5 id="error-ccdclientdefaultjiraclient---no-result-was-available-from-jira-unexpectedly---defaulting-to-blank-response-the-reason-for-this-fault-is-the-followingrestclientexceptionstatuscodeoptionalof403-errorcollections">ERROR c.c.d.client.DefaultJiraClient - No result was available from Jira unexpectedly - defaulting to blank response. The reason for this fault is the following:RestClientException{statusCode=Optional.of(403), errorCollections=[]}</h5>
<p>This may happen if you have had too many failed login attempts and a CAPTCHA guard has been triggered. Try logging in to jira with a browser successfully to remove the CAPTCHA guard. Verify that the jira credentials are correct.</p>

<h5 id="my-issue-is-not-listed-or-has-not-been-resolved">My issue is not listed or has not been resolved</h5>
<p>Search active and closed issues on github for ‘jira’. Chances are your configuration is wrong and someone else has struggled through fixing it in another issue. Please refrain from commenting on closed issues. Github link: https://github.com/capitalone/Hygieia/issues?q=jira</p>

<h2 id="implementation-details">Implementation Details:</h2>

<p>[TBA]</p>


    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               <!--&copy;2017 Capital One. All rights reserved. <br /> -->
 Site last generated: Aug 10, 2017 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>