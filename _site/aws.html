<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>AWS Collector | Hygieia</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>
<script src="js/csi.min.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Hygieia Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="https://github.com/capitalone/Hygieia" target="_blank">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="p1_landing_page.html">Supported Collectors List</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:hygieia@capitalone.com?subject=Hygieia Documentation feedback&body=I have some feedback about the AWS Collector page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="AWS Collector">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          














<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">
    <!-- <span><img src="./images/devops_logo.png"/></span> -->
     </li>
    
    
    
        
    
    <li>
        <a href="#">Home/Getting Started</a>
        <ul>
            
            
            
            <li><a href="getting_started.html">Introduction</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Installation/Setup Instructions</a>
        <ul>
            
            
            
            <li><a href="setup.html">Setup Instructions</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Configuration Procedure</a>
        <ul>
            
            
            
            <li><a href="database.html">Database Configuration</a></li>
            
            
            
            
            
            
            <li><a href="api.html">API Configuration</a></li>
            
            
            
            
            
            
            <li><a href="ui.html">UI Configuration</a></li>
            
            
            
            
            
            
            <li><a href="collectors.html">Collectors</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Additional Configuration</a>
        <ul>
            
            
            
            <li><a href="pluginjenkins.html">Plugins/Webhook</a></li>
            
            
            
            
            
            
            <li><a href="proxyauthentication.html">Proxy Authentication</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Build</a>
        <ul>
            
            
            
            <li><a href="builddocker.html">Build Docker</a></li>
            
            
            
            
            
            
            <li><a href="buildhygieia.html">Build Hygieia</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Test the Installation</a>
        <ul>
            
            
            
            <li><a href="gitsetup.html">Set up Git</a></li>
            
            
            
            
            
            
            <li><a href="sonarsetup.html">Set up Sonar</a></li>
            
            
            
            
            
            
            <li><a href="jenkinssetup.html">Set up Jenkins</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        
<div class="post-header">
   <h1 class="post-title-main">AWS Collector</h1>
</div>




<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


    

  <h1 id="hygieia-cloud-collectors--aws">Hygieia Cloud Collectors / AWS</h1>

<p>AWS Collector is part of Hygieia 2.1 release and bring in Ops view to the already dev capabilities of Hygieia like DevOps Dashboard (Hygieia 1.0) and Program level Dev View (Hygieia 2.0). The AWS Collector is a microservice with sole task of collecting data from your AWS footprint for the dashboards configured. Again as part of our component architecture this is optional and if you don’t use public cloud providers , you don’t need to run this.</p>

<h2 id="supported-cloud-platforms">Supported Cloud platforms.</h2>

<ul>
  <li>Amazon Web Service(AWS).</li>
</ul>

<h2 id="building-and-deploying">Building and Deploying</h2>

<p>To package the collector into an executable JAR file, run:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>mvn install
</code></pre>
</div>

<p>Copy this file to your server and launch it using:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>java -JAR aws-collector.jar \
  --spring.config.name=aws \
  --spring.config.location=./aws.properties
</code></pre>
</div>

<h2 id="applicationproperties">application.properties</h2>

<p>You will need to provide an <strong>application.properties</strong> file that contains information about how to connect to the Dashboard MongoDB database instance, as well as properties the AWS collector requires. See the Spring Boot <a href="http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-external-config-application-property-files">documentation</a> for information about sourcing this properties file.</p>

<h3 id="sample-applicationproperties-file">Sample application.properties file</h3>

<div class="language-properties highlighter-rouge"><pre class="highlight"><code><span class="c"># Database Name
</span><span class="py">dbname</span><span class="p">=</span><span class="s">dashboard</span>

<span class="c"># Database HostName - default is localhost
</span><span class="py">dbhost</span><span class="p">=</span><span class="s">localhost</span>

<span class="c"># Database Port - default is 27017
</span><span class="py">dbport</span><span class="p">=</span><span class="s">27017</span>

<span class="c"># MongoDB replicaset
</span><span class="py">dbreplicaset</span><span class="p">=</span><span class="s">[false if you are not using MongoDB replicaset]</span>
<span class="py">dbhostport</span><span class="p">=</span><span class="s">[host1:port1,host2:port2,host3:port3]</span>

<span class="c"># Database Username - default is blank
</span><span class="py">dbusername</span><span class="p">=</span><span class="s">db</span>

<span class="c"># Database Password - default is blank
</span><span class="py">dbpassword</span><span class="p">=</span><span class="s">dbpass</span>

<span class="c"># Logging File location
</span><span class="py">logging.file</span><span class="p">=</span><span class="s">./logs/cloud.log</span>

<span class="c"># Collector schedule (required)
</span><span class="py">aws.cron</span><span class="p">=</span><span class="s">0 0/5 * * * *</span>

<span class="c"># AWS ValidTag Key - To look for tags that you expect on your resource
</span><span class="err">aws.validTagKey[0]=ABC</span>
<span class="err">aws.validTagKey[1]=XYZ</span>

<span class="c"># AWS Proxy Host
</span><span class="py">aws.proxyHost</span><span class="p">=</span><span class="s">localhost</span>

<span class="c"># AWS Proxy Port
</span><span class="py">aws.proxyPort</span><span class="p">=</span><span class="s">3333</span>

<span class="c"># AWS Non Proxy
</span><span class="py">aws.nonProxy</span><span class="p">=</span><span class="s">xxx.xxx.xxx.xxx</span>

<span class="c"># AWS Profile to be used if any
</span><span class="py">aws.profile</span><span class="p">=</span>
</code></pre>
</div>

<p>You don’t need to provide credentials in the properties file , the preferred mechanism is via the Default credentials provider mechanism or via an IAM role, as described here:
http://docs.aws.amazon.com/AWSSdkDocsJava/latest/DeveloperGuide/credentials.html</p>

<p>You can also create an AWS credentials file using the CLI or hand such as:</p>
<div class="language-properties highlighter-rouge"><pre class="highlight"><code><span class="err">[default]</span>
<span class="py">aws_access_key_id</span><span class="p">=</span><span class="s">{YOUR_ACCESS_KEY_ID}</span>
<span class="py">aws_secret_access_key</span><span class="p">=</span><span class="s">{YOUR_SECRET_ACCESS_KEY}</span>
</code></pre>
</div>

<p>If you are running on an EC2 instance with an IAM role with appropriate access defined, that should also be sufficient.</p>


    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               <!--&copy;2017 Capital One. All rights reserved. <br /> -->
 Site last generated: Aug 10, 2017 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>