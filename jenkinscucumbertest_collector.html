---
layout: default
title: Jenkins Cucumber Test Collector
lead: Know the basics of configuring Jenkins Cucumber Test Collector
slug: jenkinscucumbertest_collector
---

<div class="bs-docs-section">
  <p class="lead">This project uses Spring Boot to package the collector as an executable JAR with dependencies.</p>

  <h2 id="building_and_deploying" class="page-header">
    <a class="anchorjs-link " href="#building_and_deploying" aria-label="Anchor link for: building_and_deploying" data-anchorjs-icon=""
    style="font-family: anchorjs-icons; font-style: normal; font-variant: normal; font-weight: normal;
    position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>  Building and Deploying
  </h2>

  <p>Execute the following command to package the collector into an executable JAR file.
  <pre code>
    mvn install</pre code>

 <p>Copy this file to your server and launch it using:<p>
<pre code>
  java -JAR jenkins-cucumber-test-collector.jar</pre code>

  <p>You will need to provide an <code>application.properties</code> file that contains information about how
to connect to the Dashboard MongoDB database instance, as well as properties the Hudson collector requires. See
the Spring Boot <a href="http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/
#boot-features-external-config-application-property-files" target="_blank">documentation</a>
for information about sourcing this properties file.</p>

<h3 id="sample_application_properties_file">Sample application.properties file</ah3>
<pre code>
</pre code>

<h2 id="jenkins_job_with_cucumber" class="page-header">
  <a class="anchorjs-link " href="#jenkins_job_with_cucumber" aria-label="Anchor link for: jenkins_job_with_cucumber" data-anchorjs-icon=""
  style="font-family: anchorjs-icons; font-style: normal; font-variant: normal; font-weight: normal;
  position: absolute; margin-left: -1em; padding-right: 0.5em;"></a> Jenkins Job with cucumber
</h2>

  <p>
    The Jenkins Cucumber Test Collector makes use of the JSON formatting output of
    <a href="https://cucumber.io)">Cucumber</a>
    test cases to provide dashboard results from various Jenkins jobs.

This collector takes advantage of tools standards established for the <a target="_blank" href="https://wiki.jenkins-ci.org/display/JENKINS/Cucumber+Test+Result+Plugin">Jenkins Cucumber Reports Plugin</a>
in the sense that it will look for the common output files generated by cucumber in the designated location to populate the collector.

</p>


<h2 id="testing_with_cucumber" class="page-header">
  <a class="anchorjs-link " href="#testing_with_cucumber" aria-label="Anchor link for: testing_with_cucumber" data-anchorjs-icon=""
  style="font-family: anchorjs-icons; font-style: normal; font-variant: normal; font-weight: normal;
  position: absolute; margin-left: -1em; padding-right: 0.5em;"></a> Testing with Cucumber
</h2>

<p>The setup for utilizing this collector relies heavily on the output of the Cucumber test cases.

All languages that utilize cucumber should allow setting the format of the output to JSON and set the name of the output file.

For the usage of this collector, all output files should be entitled "cucumber.json".

Since cucumber tests can be written in many languages, there are many examples of how to enable the output format.

Here are a couple of examples for setting these options in Java and Ruby:

For Cucumber-JVM, the Cucumber Options should be similar to the following code snippet:</p>

<pre code>
  java
  @RunWith(Cucumber.class)
  @CucumberOptions( features = "src/test/features/com/sample",
    tags = { "~@wip", "@executeThis" }, monochrome = true,
    format = { "pretty", "html:target/cucumber", "json:target/cucumber.json" } )
    public class RunCukeTest {
    }</pre code>

  <p>For Ruby Cucumber, the cucumber options for the ‘format’ should be set to ‘json’ and the ‘out’
    should designate the correct filename.
For example: Command Line:
<pre code>
  cucumber features/my_feature.feature --format json --out cucumber.json</pre code>
<p>After the cucumber.json output has been generated during a test run,
  collector will depend on a root directory to search for all output files
  that will be included in the results. If multiple projects are being executed or
  multiple cucumber commands are being called, then the folder structure created will
  provide the “suite” names for the test result report. For example:</p>
  <pre code>
    root_dir/
    |--- project1
    |    |--- cucumber.json
    |--- project2
    |    |--- cucumber.json
    |--- project3
    |    |--- cucumber.json
    ...
    ...</pre code>

<h2 id="jenkins_setup" class="page-header">
  <a class="anchorjs-link " href="#jenkins_setup" aria-label="Anchor link for: jenkins_setup" data-anchorjs-icon=""
  style="font-family: anchorjs-icons; font-style: normal; font-variant: normal; font-weight: normal;
  position: absolute; margin-left: -1em; padding-right: 0.5em;"></a> Jenkins setup
</h2>

<p>
The setup required in a Jenkins job is fairly simple. Assuming that the correct directory structure has been established from the above setup, archiving your root directory after the build completes is all that is required.

Select the “Archive the artifacts” Post-build action for your Jenkins job.

Next, set the files to archive to the root of your directory tree.</p>
</div>
